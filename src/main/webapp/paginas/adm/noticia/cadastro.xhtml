<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="../../../WEB-INF/template-cadastro.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:b="http://bootsfaces.net/ui"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core">

    <ui:define name="conteudo-cadastro">
        <h3>operação >> #{noticiaController.editando ? 'edição de notícia' : 'Nova notícia'}</h3>

        <h:form id="form" enctype="multipart/form-data">
            <b:growl id="msgs" />
            <b:panelGrid col-spans="12">
                <b:inputText label="Título" value="#{noticiaController.noticia.titulo}" 
                             placeholder="título da postagem"
                             maxlength="255" required="true" requiredMessage="informe o título"/>

                <b:inputTextarea label="SubTítulo" value="#{noticiaController.noticia.subTitulo}"
                                 placeholder="subtítulo da postagem"
                                 maxlength="255" required="true" requiredMessage="informe o sub título"/>

                <b:selectOneMenu label="Categoria" value="#{noticiaController.noticia.subCategoria}"  
                                 required="true" requiredMessage="campo obrigatório">
                    <f:attribute name="collectionType" value="java.util.ArrayList" />
                    <f:selectItem itemLabel="categoria" itemValue="" />
                    <f:selectItems value="#{subCategoriaController.subCategorias}" var="cat"
                                   itemLabel="#{cat.nome}" itemValue="#{cat}" />
                </b:selectOneMenu>
            </b:panelGrid>

            <b:panelGrid col-spans="6,6">
                <b:dateTimePicker label="Data do resgistro" id="dataRegistro" value="#{noticiaController.noticia.dataRegistro}" 
                                  placeholder="data do registro" 
                                  required="true" requiredMessage="Informe a data resgistro"
                                  styleClass="dateTimeField" >
                </b:dateTimePicker>

                <b:dateTimePicker label="Data da atualização" id="dataAtualizacao" value="#{noticiaController.noticia.dataatuAlizacao}" 
                                  placeholder="data do registro" 
                                  required="true" requiredMessage="Informe a data da atulização"
                                  styleClass="dateTimeField" >
                </b:dateTimePicker>
            </b:panelGrid>

            <b:panelGrid columns="2" styleClass="ui-panelgrid-blank form-group"> 
                <p:selectBooleanButton id="value2" value="#{noticiaController.noticia.status}" onLabel="Disponivel" 
                                       offLabel="Não disponivel" onIcon="ui-icon-check" offIcon="ui-icon-close" style="width:200px">
                    <p:ajax update="msgs" listener="#{noticiaController.addMessageDisponivel()}" />
                </p:selectBooleanButton>

                <p:selectBooleanButton id="destaque" value="#{noticiaController.noticia.destaque}" onLabel="Destaque" 
                                       offLabel="Em destaque" onIcon="ui-icon-check" offIcon="ui-icon-close" style="width:200px">
                    <p:ajax update="msgs" listener="#{noticiaController.addMessageDestaque()}" />
                </p:selectBooleanButton>
            </b:panelGrid>

            <b:panelGrid col-spans="12">
                <h:outputLabel value="Descrição detalhada da notícia *" for="descricao"/>
                <p:textEditor id="descricao" widgetVar="editorWidget" value="#{noticiaController.noticia.descricao}" height="500"
                              required="true" requiredMessage="informe a descrição da notícia" />
            </b:panelGrid>

            <b:panelGrid col-spans="12" style="margin-top: 1%;">
                <h:outputLabel value="Arquivo de destaque da notícia *" for="descricao"/>
                <p:fileUpload required="false" skinSimple="false" 
                              fileUploadListener="#{noticiaController.handleFileUpload}" mode="advanced"
                              label="Anexar foto" uploadLabel="Inserir" auto="false" 
                              sizeLimit="16000000"  widgetVar="uploader"
                              cancelLabel="excluir"  invalidFileMessage="Arquivo inválido"
                              invalidSizeMessage="Tamanho do arquivo não permitido!" multiple="false"
                              allowTypes="/(\.|\/)(gif|jpe?g|png|pdf|odt|txt|csv)$/" /> 
            </b:panelGrid>

            <b:panelGrid col-spans="12" style="margin-top: 1%;">
                <b:commandButton value="enviar" action="#{noticiaController.salvar()}" look="primary" icon-awesome="fa fa-checked" style="width:100%">
                    <f:ajax execute="@form" render="form" />
                </b:commandButton>
            </b:panelGrid>

        </h:form>
    </ui:define>
</ui:composition>